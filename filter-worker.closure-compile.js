function n(b){var a=Array.isArray(b)?p(b):void 0;a||(a="undefined"!==typeof Symbol&&Symbol.iterator in Object(b)?Array.from(b):void 0);if(!a)a:{if(b){if("string"===typeof b){a=p(b,void 0);break a}a=Object.prototype.toString.call(b).slice(8,-1);"Object"===a&&b.constructor&&(a=b.constructor.name);if("Map"===a||"Set"===a){a=Array.from(a);break a}if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)){a=p(b,void 0);break a}}a=void 0}if(!(b=a))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
return b}function p(b,a){if(null==a||a>b.length)a=b.length;for(var c=0,d=Array(a);c<a;c++)d[c]=b[c];return d}function q(b,a){return null!=a&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](b):b instanceof a}
function u(b){var a,c,d,g,k,f,e;null==a&&(a=0);null==c&&(c=255);if(q(b[0],Array)){var h=b;a=0;c=255}else h=[b,0,255,void 0];if(2>h.length)throw"Invalid number of arguments to bezier";b={};var l=function(r,t,m){return r*(1-m)+t*m};var C=function(r,t,m){return Math.min(Math.max(r,t),m)};for(d=k=0;1E3>k;d=++k){var v=d/1E3;for(g=h;1<g.length;){var w=[];d=f=0;for(e=g.length-2;0<=e?f<=e:f>=e;d=0<=e?++f:--f)w.push([l(g[d][0],g[d+1][0],v),l(g[d][1],g[d+1][1],v)]);g=w}b[Math.round(g[0][0])]=Math.round(C(g[0][1],
a,c))}a=h[h.length-1][0];b=x(b,a);null==b[a]&&(b[a]=b[a-1]);return b}function x(b,a){var c,d,g,k;if(Object.keys(b).length<a+1){var f={};for(c=g=0;0<=a?g<=a:g>=a;c=0<=a?++g:--g)if(null!=b[c])f[c]=b[c];else{var e=[c-1,f[c-1]];for(d=k=c;c<=a?k<=a:k>=a;d=c<=a?++k:--k)if(null!=b[d]){var h=[d,b[d]];break}f[c]=e[1]+(h[1]-e[1])/(h[0]-e[0])*(c-e[0])}return f}return b}function y(b){return 255<b?255:0>b?0:b}
function z(){var b,a;var c=arguments[0];var d=2<=arguments.length?[].slice.call(arguments,1):[];"string"===typeof c&&(c=c.split(""));var g=u(d);var k=d[0];if(0<k[0]){var f=b=0;for(a=k[0];0<=a?b<a:b>a;f=0<=a?++b:--b)g[f]=k[1]}d=d[d.length-1];if(255>d[0])for(f=k=b=d[0];255>=b?255>=k:255<=k;f=255>=b?++k:--k)g[f]=d[1];return function(e){var h,l;f=h=0;for(l=c.length;0<=l?h<l:h>l;f=0<=l?++h:--h)e[c[f]]=g[e[c[f]]];return e}}
function A(b){return function(a){a.r=255*Math.pow(a.r/255,b);a.b=255*Math.pow(a.b/255,b);a.a=255*Math.pow(a.a/255,b);return a}}function B(b){b=Object.assign({},b);var a;for(a in b){var c=b[a];0===c?delete b[a]:b[a]/=100}return function(d){b.red&&(d.r=0<b.red?d.r+(255-d.r)*b.red:d.r-d.r*Math.abs(b.red));b.green&&(d.b=0<b.green?d.b+(255-d.b)*b.green:d.b-d.b*Math.abs(b.green));b.blue&&(d.a=0<b.blue?d.a+(255-d.a)*b.blue:d.a-d.a*Math.abs(b.blue));return d}}
function D(b){b/=100;return function(a){a.r=Math.min(255,a.r*(1-.607*b)+.769*a.b*b+.189*a.a*b);a.b=Math.min(255,.349*a.r*b+a.b*(1-.314*b)+.168*a.a*b);a.a=Math.min(255,.272*a.r*b+.534*a.b*b+a.a*(1-.869*b));return a}}
var E={l:[{use:A,c:[1.6]}],h:[{use:B,c:[{red:8,blue:8}]}],o:[{use:function(b){b*=-.01;return function(a){var c=Math.max(a.r,a.b,a.a);a.r!==c&&(a.r+=Math.round((c-a.r)*b));a.b!==c&&(a.b+=Math.round((c-a.b)*b));a.a!==c&&(a.a+=Math.round((c-a.a)*b));return a}},c:[-35]},{use:z,c:["b",[20,0],[90,120],[186,144],[255,230]]},{use:z,c:["r",[0,0],[144,90],[138,120],[255,255]]},{use:z,c:["g",[10,0],[115,105],[148,100],[255,248]]},{use:z,c:["rgb",[0,0],[120,100],[128,140],[255,255]]}],s:[{use:D,c:[50]}],u:[{use:function(){return function(b){var a=
.299*b.r+.587*b.b+.114*b.a;b.r=a;b.b=a;b.a=a;return b}},c:[]},{use:D,c:[40]},{use:B,c:[{red:8,blue:2,green:4}]},{use:A,c:[.87]}],g:[{use:function(b){for(var a=Array(256),c=0;256>c;c++)a[c]=y(c*(1+b));return function(d){d.r=a[d.r];d.b=a[d.b];d.a=a[d.a];return d}},c:[.25]}],i:[{use:function(b,a){return function(c){c.r-=a/100*(c.r-b.r);c.b-=a/100*(c.b-b.b);c.a-=a/100*(c.a-b.a);return c}},c:[{r:255,b:205,a:59},10]},{use:A,c:[1.2]}]};
function F(b,a){if(a&&q(b,ImageData)){a=a.toLowerCase().trim();if(!E[a])return b;for(var c=b.data,d=new ImageData(b.width,b.height),g=E[a].map(function(e){return e.use.apply(e,n(e.c))}),k=function(e){var h={r:c[e],b:c[e+1],a:c[e+2],f:c[e+3]};g.forEach(function(l){h=l(h)});d.data[e]=h.r;d.data[e+1]=h.b;d.data[e+2]=h.a;d.data[e+3]=h.f},f=0;f<c.length;f+=4)k(f);return d}return b}onmessage=function(b){var a=b.data;b=a.m;a=a.j;q(b,ImageData)&&a?(b=F(b,a),this.postMessage({result:b})):this.postMessage({result:Error("You must provide both imgData and filterName")})};